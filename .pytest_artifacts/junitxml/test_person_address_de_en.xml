<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="8" skipped="0" tests="66" time="84.701" timestamp="2026-02-14T20:33:19.293989+01:00" hostname="SteffenXpert"><testcase classname="tests.unit.test_person_address_de_en" name="test_person_intro_true_positives[Mein Name ist Anna M\xfcller]" time="1.618" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_intro_true_positives[Ich hei\xdfe Lukas Bauer]" time="1.145" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_intro_true_positives[My name is John Doe]" time="1.303" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_intro_true_positives[I am called Sarah Connor]" time="1.120"><failure message="AssertionError: Expected &lt;PERSON&gt; in: I am called Sarah Connor&#10;assert False&#10; +  where False = has_tag('I am called Sarah Connor', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199A00BDED0&gt;
text = 'I am called Sarah Connor'

    @pytest.mark.parametrize("text", [
        "Mein Name ist Anna Müller",
        "Ich heiße Lukas Bauer",
        "My name is John Doe",
        "I am called Sarah Connor",
        # allow small variation/whitespace
        "  Mein Name ist   Paul  Meier  ",
    ])
    def test_person_intro_true_positives(f, text):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "PERSON"), f"Expected &lt;PERSON&gt; in: {out}"
E       AssertionError: Expected &lt;PERSON&gt; in: I am called Sarah Connor
E       assert False
E        +  where False = has_tag('I am called Sarah Connor', 'PERSON')

tests\unit\test_person_address_de_en.py:47: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_person_intro_true_positives[  Mein Name ist   Paul  Meier  ]" time="1.156" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Adresse: Hauptstra\xdfe]" time="1.192" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Stra\xdfe]" time="1.220" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Weg]" time="1.543" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Gasse]" time="1.206" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Allee]" time="1.242" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[RECHNUNG]" time="1.161" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[KUNDENNUMMER]" time="1.101" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[am 12. M\xe4rz 1985]" time="1.447" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Meine Telefonnummer ist 030 123456]" time="1.207" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Hauptstra\xdfe 10]" time="1.204" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Ich bin in Berlin]" time="1.180" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_common_false_positives[Customer name: street]" time="1.183" /><testcase classname="tests.unit.test_person_address_de_en" name="test_overlap_intro_prefers_person" time="1.495" /><testcase classname="tests.unit.test_person_address_de_en" name="test_overlap_numeric_prefers_address" time="1.148" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Musterstra\xdfe 12, 10115 Berlin]" time="1.148" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Hauptstra\xdfe 5]" time="1.136" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Main Street 42, 12345 Sampletown]" time="1.143"><failure message="AssertionError: Expected &lt;ADDRESS&gt; in: Main Street 42, &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('Main Street 42, &lt;LOCATION&gt;', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199D4A5AC50&gt;
text = 'Main Street 42, 12345 Sampletown'

    @pytest.mark.parametrize("text", [
        "Musterstraße 12, 10115 Berlin",
        "Hauptstraße 5",
        "Main Street 42, 12345 Sampletown",
        "Goethestraße 10\n10115 Berlin",
        "Lindenstr. 7 – 80331 München",
        "Am Stadtpark 3, 20095 Hamburg",
    ])
    def test_address_true_positives(f, text):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "ADDRESS"), f"Expected &lt;ADDRESS&gt; in: {out}"
E       AssertionError: Expected &lt;ADDRESS&gt; in: Main Street 42, &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('Main Street 42, &lt;LOCATION&gt;', 'ADDRESS')

tests\unit\test_person_address_de_en.py:101: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Goethestra\xdfe 10\n10115 Berlin]" time="1.103" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Lindenstr. 7 \u2013 80331 M\xfcnchen]" time="1.177" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_true_positives[Am Stadtpark 3, 20095 Hamburg]" time="1.091" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Stra\xdfe]" time="1.177" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Weg]" time="1.664" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Gasse]" time="1.104" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Allee]" time="1.133" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Berlin]" time="1.175" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[M\xfcnchen]" time="1.189" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Hamburg]" time="1.569" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[adresse: rue-victor@example.com]" time="1.169" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_common_false_positives[Adresse: https://example.com/Hauptstrasse]" time="1.132" /><testcase classname="tests.unit.test_person_address_de_en" name="test_postal_city_is_location_not_address[10115 Berlin]" time="1.390" /><testcase classname="tests.unit.test_person_address_de_en" name="test_postal_city_is_location_not_address[20095 Hamburg]" time="1.153" /><testcase classname="tests.unit.test_person_address_de_en" name="test_postal_city_is_location_not_address[80331 M\xfcnchen]" time="1.128" /><testcase classname="tests.unit.test_person_address_de_en" name="test_postal_city_is_location_not_address[12345 Sampletown]" time="1.174" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_location_merge_becomes_address[Hauptstra\xdfe 5, 80331 M\xfcnchen]" time="1.144" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_location_merge_becomes_address[Goethestra\xdfe 10\n10115 Berlin]" time="1.597" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_location_merge_becomes_address[Main Street 42 \u2014 12345 Sampletown]" time="1.214"><failure message="AssertionError: Expected merged &lt;ADDRESS&gt; in: Main Street 42 — &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('Main Street 42 — &lt;LOCATION&gt;', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199D32616D0&gt;
text = 'Main Street 42 — 12345 Sampletown'

    @pytest.mark.parametrize("text", [
        "Hauptstraße 5, 80331 München",
        "Goethestraße 10\n10115 Berlin",
        "Main Street 42 — 12345 Sampletown",
    ])
    def test_address_location_merge_becomes_address(f, text):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "ADDRESS"), f"Expected merged &lt;ADDRESS&gt; in: {out}"
E       AssertionError: Expected merged &lt;ADDRESS&gt; in: Main Street 42 — &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('Main Street 42 — &lt;LOCATION&gt;', 'ADDRESS')

tests\unit\test_person_address_de_en.py:147: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Berg]" time="1.112" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Wald]" time="1.215" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Feld]" time="1.268" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[See]" time="1.686" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Bach]" time="1.085" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Am Berg]" time="1.029" /><testcase classname="tests.unit.test_person_address_de_en" name="test_natural_suffix_requires_number[Im Wald]" time="1.040" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_trim_and_no_bleed_into_labels[Hauptstra\xdfe 10\nEmail: someone@example.com]" time="1.208" /><testcase classname="tests.unit.test_person_address_de_en" name="test_address_trim_and_no_bleed_into_labels[Main Street 42, 12345 City\nTelefon: 030 123456]" time="1.668"><failure message="AssertionError: Expected &lt;ADDRESS&gt; in: Main Street 42, &lt;LOCATION&gt;: 030 123456&#10;assert False&#10; +  where False = has_tag('Main Street 42, &lt;LOCATION&gt;: 030 123456', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199BF2DE890&gt;
text = 'Main Street 42, 12345 City\nTelefon: 030 123456'

    @pytest.mark.parametrize("text", [
        "Hauptstraße 10\nEmail: someone@example.com",
        "Main Street 42, 12345 City\nTelefon: 030 123456",
    ])
    def test_address_trim_and_no_bleed_into_labels(f, text):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "ADDRESS"), f"Expected &lt;ADDRESS&gt; in: {out}"
E       AssertionError: Expected &lt;ADDRESS&gt; in: Main Street 42, &lt;LOCATION&gt;: 030 123456
E       assert False
E        +  where False = has_tag('Main Street 42, &lt;LOCATION&gt;: 030 123456', 'ADDRESS')

tests\unit\test_person_address_de_en.py:173: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_person_single_token_needs_intro[Anna-False]" time="1.253"><failure message="AssertionError: &lt;PERSON&gt;&#10;assert True == False&#10; +  where True = has_tag('&lt;PERSON&gt;', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199BF2A6B90&gt;
text = 'Anna', expect_person = False

    @pytest.mark.parametrize("text, expect_person", [
        ("Anna", False),                   # too ambiguous; no intro cue
        ("Mein Name ist Anna", True),     # intro cue allows single token
        ("Ich bin Anna", True),           # allowed if name-like token follows
        ("Ich bin in München", False),    # 'Ich bin' + location (not a name)
    ])
    def test_person_single_token_needs_intro(f, text, expect_person):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "PERSON") == expect_person, out
E       AssertionError: &lt;PERSON&gt;
E       assert True == False
E        +  where True = has_tag('&lt;PERSON&gt;', 'PERSON')

tests\unit\test_person_address_de_en.py:191: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_person_single_token_needs_intro[Mein Name ist Anna-True]" time="1.319" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_single_token_needs_intro[Ich bin Anna-True]" time="1.414" /><testcase classname="tests.unit.test_person_address_de_en" name="test_person_single_token_needs_intro[Ich bin in M\xfcnchen-False]" time="1.401" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[+49 30 1234567-PHONE_NUMBER]" time="1.674"><failure message="AssertionError: Expected &lt;PHONE_NUMBER&gt; in: &lt;PHONE&gt;&#10;assert False&#10; +  where False = has_tag('&lt;PHONE&gt;', 'PHONE_NUMBER')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199A3E2DC90&gt;
text = '+49 30 1234567', tag = 'PHONE_NUMBER'

    @pytest.mark.parametrize("text, tag", [
        ("+49 30 1234567", "PHONE_NUMBER"),
        ("I was born on March 15, 1985", "DATE"),
        ("Meine Sozialversicherungsnummer ist 123-45-6789", "ID_NUMBER"),
        ("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token", "ACCESS_TOKEN"),
        ("sk-proj-1234567890abcdefghijklmnop", "API_KEY"),
        ("sk_live_abc123def456", "API_KEY"),  # by policy in your suite
        ("tok_abc123def456ghi789xyz", "PAYMENT_TOKEN"),
        ("0x52908400098527886E0F7030069857D2E4169EE7", "CRYPTO_ADDRESS"),
        ("AA:BB:CC:DD:EE:FF", "MAC_ADDRESS"),
        ("192.168.1.10", "IP_ADDRESS"),
    ])
    def test_non_regression_other_entities(f, text, tag):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, tag), f"Expected &lt;{tag}&gt; in: {out}"
E       AssertionError: Expected &lt;PHONE_NUMBER&gt; in: &lt;PHONE&gt;
E       assert False
E        +  where False = has_tag('&lt;PHONE&gt;', 'PHONE_NUMBER')

tests\unit\test_person_address_de_en.py:212: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[I was born on March 15, 1985-DATE]" time="1.050" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[Meine Sozialversicherungsnummer ist 123-45-6789-ID_NUMBER]" time="1.182" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token-ACCESS_TOKEN]" time="1.298" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[sk-proj-1234567890abcdefghijklmnop-API_KEY]" time="1.356" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[sk_live_abc123def456-API_KEY]" time="1.502" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[tok_abc123def456ghi789xyz-PAYMENT_TOKEN]" time="1.009"><failure message="AssertionError: Expected &lt;PAYMENT_TOKEN&gt; in: tok_abc123def456ghi789xyz&#10;assert False&#10; +  where False = has_tag('tok_abc123def456ghi789xyz', 'PAYMENT_TOKEN')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199B973B510&gt;
text = 'tok_abc123def456ghi789xyz', tag = 'PAYMENT_TOKEN'

    @pytest.mark.parametrize("text, tag", [
        ("+49 30 1234567", "PHONE_NUMBER"),
        ("I was born on March 15, 1985", "DATE"),
        ("Meine Sozialversicherungsnummer ist 123-45-6789", "ID_NUMBER"),
        ("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token", "ACCESS_TOKEN"),
        ("sk-proj-1234567890abcdefghijklmnop", "API_KEY"),
        ("sk_live_abc123def456", "API_KEY"),  # by policy in your suite
        ("tok_abc123def456ghi789xyz", "PAYMENT_TOKEN"),
        ("0x52908400098527886E0F7030069857D2E4169EE7", "CRYPTO_ADDRESS"),
        ("AA:BB:CC:DD:EE:FF", "MAC_ADDRESS"),
        ("192.168.1.10", "IP_ADDRESS"),
    ])
    def test_non_regression_other_entities(f, text, tag):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, tag), f"Expected &lt;{tag}&gt; in: {out}"
E       AssertionError: Expected &lt;PAYMENT_TOKEN&gt; in: tok_abc123def456ghi789xyz
E       assert False
E        +  where False = has_tag('tok_abc123def456ghi789xyz', 'PAYMENT_TOKEN')

tests\unit\test_person_address_de_en.py:212: AssertionError</failure></testcase><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[0x52908400098527886E0F7030069857D2E4169EE7-CRYPTO_ADDRESS]" time="1.191" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[AA:BB:CC:DD:EE:FF-MAC_ADDRESS]" time="1.189" /><testcase classname="tests.unit.test_person_address_de_en" name="test_non_regression_other_entities[192.168.1.10-IP_ADDRESS]" time="1.557" /><testcase classname="tests.unit.test_person_address_de_en" name="test_mixed_line_stress[Kunde: Anna M\xfcller, Adresse: Hauptstra\xdfe 5, 10115 Berlin]" time="1.202" /><testcase classname="tests.unit.test_person_address_de_en" name="test_mixed_line_stress[Customer: John Doe; Address: Main Street 42, 12345 Sampletown]" time="1.212"><failure message="AssertionError: Expected &lt;PERSON&gt; in: &lt;CUSTOMER_NUMBER&gt; Doe; Address: Main Street 42, &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('&lt;CUSTOMER_NUMBER&gt; Doe; Address: Main Street 42, &lt;LOCATION&gt;', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x00000199A2EE1F10&gt;
text = 'Customer: John Doe; Address: Main Street 42, 12345 Sampletown'

    @pytest.mark.parametrize("text", [
        "Kunde: Anna Müller, Adresse: Hauptstraße 5, 10115 Berlin",
        "Customer: John Doe; Address: Main Street 42, 12345 Sampletown",
    ])
    def test_mixed_line_stress(f, text):
        out = f.anonymize_text(text)
&gt;       assert has_tag(out, "PERSON"), f"Expected &lt;PERSON&gt; in: {out}"
E       AssertionError: Expected &lt;PERSON&gt; in: &lt;CUSTOMER_NUMBER&gt; Doe; Address: Main Street 42, &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('&lt;CUSTOMER_NUMBER&gt; Doe; Address: Main Street 42, &lt;LOCATION&gt;', 'PERSON')

tests\unit\test_person_address_de_en.py:225: AssertionError</failure></testcase></testsuite></testsuites>