<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="11" skipped="0" tests="47" time="57.204" timestamp="2026-02-14T20:19:32.142827+01:00" hostname="SteffenXpert"><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_person_intro[User: Hi, my name is John Doe\nBot: Nice to meet you, John!]" time="1.561" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_person_intro[User: hey there, I'm Sarah Connor\nAgent: Hi Sarah, how can I help?]" time="1.098" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_person_intro[User: I am called Mike\nSupport: Hello Mike \U0001f44b]" time="1.261" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_de_chat_person_intro[Kunde: Mein Name ist Anna M\xfcller\nBot: Hallo Anna!]" time="1.083" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_de_chat_person_intro[User: Ich hei\xdfe Lukas Bauer\nBerater: Wie kann ich helfen?]" time="1.085" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_de_chat_person_intro[Kunde: Ich bin Paul Meier\nBot: Hallo Paul! \U0001f60a]" time="1.085" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_true_positives[User: My address is 221B Baker Street, NW1 6XE London]" time="1.134" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_true_positives[User: Shipping address: Main Street 42, 12345 Sampletown]" time="1.460"><failure message="AssertionError: User: Shipping address: Main Street 42, &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('User: Shipping address: Main Street 42, &lt;LOCATION&gt;', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E977305890&gt;
chat = 'User: Shipping address: Main Street 42, 12345 Sampletown'

    @pytest.mark.parametrize("chat", [
        "User: My address is 221B Baker Street, NW1 6XE London",
        "User: Shipping address: Main Street 42, 12345 Sampletown",
        "Kunde: Meine Adresse ist Hauptstraße 5, 10115 Berlin",
        "Kunde: Lieferadresse: Goethestraße 10\n80331 München",
        "User: Send to Am Stadtpark 3, 20095 Hamburg",
    ])
    def test_chat_address_true_positives(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, ADDRESS), out
E       AssertionError: User: Shipping address: Main Street 42, &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('User: Shipping address: Main Street 42, &lt;LOCATION&gt;', 'ADDRESS')

tests\unit\test_chat_person_address_de_en.py:91: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_true_positives[Kunde: Meine Adresse ist Hauptstra\xdfe 5, 10115 Berlin]" time="1.096"><failure message="AssertionError: &lt;PERSON&gt;: Meine Adresse ist &lt;ADDRESS&gt;&#10;assert not True&#10; +  where True = has_tag('&lt;PERSON&gt;: Meine Adresse ist &lt;ADDRESS&gt;', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E931E00F50&gt;
chat = 'Kunde: Meine Adresse ist Hauptstraße 5, 10115 Berlin'

    @pytest.mark.parametrize("chat", [
        "User: My address is 221B Baker Street, NW1 6XE London",
        "User: Shipping address: Main Street 42, 12345 Sampletown",
        "Kunde: Meine Adresse ist Hauptstraße 5, 10115 Berlin",
        "Kunde: Lieferadresse: Goethestraße 10\n80331 München",
        "User: Send to Am Stadtpark 3, 20095 Hamburg",
    ])
    def test_chat_address_true_positives(f, chat):
        out = f.anonymize_text(chat)
        assert has_tag(out, ADDRESS), out
        # Don’t mis-tag address as PERSON
&gt;       assert not has_tag(out, PERSON), out
E       AssertionError: &lt;PERSON&gt;: Meine Adresse ist &lt;ADDRESS&gt;
E       assert not True
E        +  where True = has_tag('&lt;PERSON&gt;: Meine Adresse ist &lt;ADDRESS&gt;', 'PERSON')

tests\unit\test_chat_person_address_de_en.py:93: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_true_positives[Kunde: Lieferadresse: Goethestra\xdfe 10\n80331 M\xfcnchen]" time="1.090"><failure message="AssertionError: &lt;PERSON&gt;: &lt;PERSON&gt;: &lt;ADDRESS&gt;&#10;assert not True&#10; +  where True = has_tag('&lt;PERSON&gt;: &lt;PERSON&gt;: &lt;ADDRESS&gt;', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E904DE8A10&gt;
chat = 'Kunde: Lieferadresse: Goethestraße 10\n80331 München'

    @pytest.mark.parametrize("chat", [
        "User: My address is 221B Baker Street, NW1 6XE London",
        "User: Shipping address: Main Street 42, 12345 Sampletown",
        "Kunde: Meine Adresse ist Hauptstraße 5, 10115 Berlin",
        "Kunde: Lieferadresse: Goethestraße 10\n80331 München",
        "User: Send to Am Stadtpark 3, 20095 Hamburg",
    ])
    def test_chat_address_true_positives(f, chat):
        out = f.anonymize_text(chat)
        assert has_tag(out, ADDRESS), out
        # Don’t mis-tag address as PERSON
&gt;       assert not has_tag(out, PERSON), out
E       AssertionError: &lt;PERSON&gt;: &lt;PERSON&gt;: &lt;ADDRESS&gt;
E       assert not True
E        +  where True = has_tag('&lt;PERSON&gt;: &lt;PERSON&gt;: &lt;ADDRESS&gt;', 'PERSON')

tests\unit\test_chat_person_address_de_en.py:93: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_true_positives[User: Send to Am Stadtpark 3, 20095 Hamburg]" time="1.099" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_city_or_postal_city_not_address[User: I am in Berlin today]" time="1.415" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_city_or_postal_city_not_address[User: Let\u2019s meet in Munich]" time="1.078" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_city_or_postal_city_not_address[Kunde: Ich bin in Hamburg unterwegs]" time="1.095" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_city_or_postal_city_not_address[Kunde: 10115 Berlin (nur PLZ+Stadt)]" time="1.118" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[User: Stra\xdfe]" time="1.114" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[User: Weg]" time="1.513" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[User: Gasse]" time="1.068" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[User: Allee]" time="1.108" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[User: ADDRESS:]" time="1.100" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[Kunde: RECHNUNG]" time="1.094"><failure message="AssertionError: &lt;PERSON&gt;: &lt;BANK_ACCOUNT&gt;&#10;assert not True&#10; +  where True = has_tag('&lt;PERSON&gt;: &lt;BANK_ACCOUNT&gt;', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E9121F7710&gt;
chat = 'Kunde: RECHNUNG'

    @pytest.mark.parametrize("chat", [
        "User: Straße",
        "User: Weg",
        "User: Gasse",
        "User: Allee",
        "User: ADDRESS:",
        "Kunde: RECHNUNG",
        "Kunde: KUNDENNUMMER",
    ])
    def test_chat_single_tokens_not_person_or_address(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert not has_tag(out, PERSON), out
E       AssertionError: &lt;PERSON&gt;: &lt;BANK_ACCOUNT&gt;
E       assert not True
E        +  where True = has_tag('&lt;PERSON&gt;: &lt;BANK_ACCOUNT&gt;', 'PERSON')

tests\unit\test_chat_person_address_de_en.py:129: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_single_tokens_not_person_or_address[Kunde: KUNDENNUMMER]" time="1.433"><failure message="AssertionError: &lt;PERSON&gt;: KUNDENNUMMER&#10;assert not True&#10; +  where True = has_tag('&lt;PERSON&gt;: KUNDENNUMMER', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E977181F50&gt;
chat = 'Kunde: KUNDENNUMMER'

    @pytest.mark.parametrize("chat", [
        "User: Straße",
        "User: Weg",
        "User: Gasse",
        "User: Allee",
        "User: ADDRESS:",
        "Kunde: RECHNUNG",
        "Kunde: KUNDENNUMMER",
    ])
    def test_chat_single_tokens_not_person_or_address(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert not has_tag(out, PERSON), out
E       AssertionError: &lt;PERSON&gt;: KUNDENNUMMER
E       assert not True
E        +  where True = has_tag('&lt;PERSON&gt;: KUNDENNUMMER', 'PERSON')

tests\unit\test_chat_person_address_de_en.py:129: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_no_address_in_email_or_url[User: adresse: max.mustermann@example.com]" time="1.124" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_no_address_in_email_or_url[User: Address: https://maps.example.com/Hauptstrasse]" time="1.114" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_no_address_in_email_or_url[Kunde: Meine Adresse ist in meinem Profil: https://portal.example.de/user/paul]" time="1.433" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_mixed_timestamps_speakers" time="1.103" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_request_no_address" time="1.111" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_de_chat_ich_bin_location_not_person[Kunde: Ich bin in M\xfcnchen im Urlaub]" time="1.182"><failure message="AssertionError: &lt;PERSON&gt;: Ich bin in München im Urlaub&#10;assert not True&#10; +  where True = has_tag('&lt;PERSON&gt;: Ich bin in München im Urlaub', 'PERSON')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E905F13910&gt;
chat = 'Kunde: Ich bin in München im Urlaub'

    @pytest.mark.parametrize("chat", [
        "Kunde: Ich bin in München im Urlaub",
        "User: Ich bin in Berlin, kein Name",
    ])
    def test_de_chat_ich_bin_location_not_person(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert not has_tag(out, PERSON), out
E       AssertionError: &lt;PERSON&gt;: Ich bin in München im Urlaub
E       assert not True
E        +  where True = has_tag('&lt;PERSON&gt;: Ich bin in München im Urlaub', 'PERSON')

tests\unit\test_chat_person_address_de_en.py:184: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_de_chat_ich_bin_location_not_person[User: Ich bin in Berlin, kein Name]" time="1.134" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_partial_address_across_lines[User: Stra\xdfe: Hauptstra\xdfe\nNr.: 10\nPLZ/Ort: 10115 Berlin]" time="1.457"><failure message="AssertionError: User: Straße: Hauptstraße&#10;  Nr.: 10&#10;  PLZ/Ort: &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('User: Straße: Hauptstraße\nNr.: 10\nPLZ/Ort: &lt;LOCATION&gt;', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E936CE4450&gt;
chat = 'User: Straße: Hauptstraße\nNr.: 10\nPLZ/Ort: 10115 Berlin'

    @pytest.mark.parametrize("chat", [
        "User: Straße: Hauptstraße\nNr.: 10\nPLZ/Ort: 10115 Berlin",
        "User: Street: Baker St.\nNumber: 221B\nCity: London",
    ])
    def test_chat_partial_address_across_lines(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, ADDRESS), out
E       AssertionError: User: Straße: Hauptstraße
E         Nr.: 10
E         PLZ/Ort: &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('User: Straße: Hauptstraße\nNr.: 10\nPLZ/Ort: &lt;LOCATION&gt;', 'ADDRESS')

tests\unit\test_chat_person_address_de_en.py:197: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_partial_address_across_lines[User: Street: Baker St.\nNumber: 221B\nCity: London]" time="1.128"><failure message="AssertionError: User: Street: &lt;PERSON&gt;&#10;  Number: 221B&#10;  City: London&#10;assert False&#10; +  where False = has_tag('User: Street: &lt;PERSON&gt;\nNumber: 221B\nCity: London', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E927ABD1D0&gt;
chat = 'User: Street: Baker St.\nNumber: 221B\nCity: London'

    @pytest.mark.parametrize("chat", [
        "User: Straße: Hauptstraße\nNr.: 10\nPLZ/Ort: 10115 Berlin",
        "User: Street: Baker St.\nNumber: 221B\nCity: London",
    ])
    def test_chat_partial_address_across_lines(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, ADDRESS), out
E       AssertionError: User: Street: &lt;PERSON&gt;
E         Number: 221B
E         City: London
E       assert False
E        +  where False = has_tag('User: Street: &lt;PERSON&gt;\nNumber: 221B\nCity: London', 'ADDRESS')

tests\unit\test_chat_person_address_de_en.py:197: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_handles_tickets_not_person_address[User: my handle is @john_doe and ticket is ABC-12345]" time="1.122" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_handles_tickets_not_person_address[Support: refer to case #987654; user is @sarah-c]" time="1.105" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_en_chat_handles_tickets_not_person_address[User: send it to @max (not an address)]" time="1.123" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_street_without_number_not_address[User: Can you send it to Baker Street?]" time="1.443" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_street_without_number_not_address[Kunde: Kannst du es zur Goethestra\xdfe schicken?]" time="1.094" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_abbreviations_true_positive[User: Send to Hauptstr. 5, 10115 Berlin]" time="1.100" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_abbreviations_true_positive[User: Shipping to Main St. 10, 90210 Beverly Hills]" time="1.105"><failure message="AssertionError: User: Shipping to Main St. 10, &lt;LOCATION&gt;&#10;assert False&#10; +  where False = has_tag('User: Shipping to Main St. 10, &lt;LOCATION&gt;', 'ADDRESS')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E975E550D0&gt;
chat = 'User: Shipping to Main St. 10, 90210 Beverly Hills'

    @pytest.mark.parametrize("chat", [
        "User: Send to Hauptstr. 5, 10115 Berlin",
        "User: Shipping to Main St. 10, 90210 Beverly Hills",
        "User: Deliver to 10 Downing St, SW1A 2AA London",
    ])
    def test_chat_address_abbreviations_true_positive(f, chat):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, ADDRESS), out
E       AssertionError: User: Shipping to Main St. 10, &lt;LOCATION&gt;
E       assert False
E        +  where False = has_tag('User: Shipping to Main St. 10, &lt;LOCATION&gt;', 'ADDRESS')

tests\unit\test_chat_person_address_de_en.py:239: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_chat_address_abbreviations_true_positive[User: Deliver to 10 Downing St, SW1A 2AA London]" time="1.098" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[Call me at +49 30 1234567-PHONE_NUMBER]" time="1.449"><failure message="AssertionError: Call me at &lt;PHONE&gt;&#10;assert False&#10; +  where False = has_tag('Call me at &lt;PHONE&gt;', 'PHONE_NUMBER')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E9386251D0&gt;
chat = 'Call me at +49 30 1234567', expected = 'PHONE_NUMBER'

    @pytest.mark.parametrize("chat, expected", [
        ("Call me at +49 30 1234567", "PHONE_NUMBER"),
        ("I was born on March 15, 1985", "DATE"),
        ("SSN: 123-45-6789", "ID_NUMBER"),
        ("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token", "ACCESS_TOKEN"),
        ("sk-proj-1234567890abcdefghijklmnop", "API_KEY"),
        ("tok_abc123def456ghi789xyz", "PAYMENT_TOKEN"),
        ("MAC AA:BB:CC:DD:EE:FF", "MAC_ADDRESS"),
        ("IP: 192.168.1.1", "IP_ADDRESS"),
    ])
    def test_non_regression_other_entities_in_chat(f, chat, expected):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, expected), out
E       AssertionError: Call me at &lt;PHONE&gt;
E       assert False
E        +  where False = has_tag('Call me at &lt;PHONE&gt;', 'PHONE_NUMBER')

tests\unit\test_chat_person_address_de_en.py:258: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[I was born on March 15, 1985-DATE]" time="1.063" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[SSN: 123-45-6789-ID_NUMBER]" time="1.130" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token-ACCESS_TOKEN]" time="1.110" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[sk-proj-1234567890abcdefghijklmnop-API_KEY]" time="1.412" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[tok_abc123def456ghi789xyz-PAYMENT_TOKEN]" time="1.118"><failure message="AssertionError: tok_abc123def456ghi789xyz&#10;assert False&#10; +  where False = has_tag('tok_abc123def456ghi789xyz', 'PAYMENT_TOKEN')">f = &lt;pii_filter.pii_filter.PIIFilter object at 0x000001E905269110&gt;
chat = 'tok_abc123def456ghi789xyz', expected = 'PAYMENT_TOKEN'

    @pytest.mark.parametrize("chat, expected", [
        ("Call me at +49 30 1234567", "PHONE_NUMBER"),
        ("I was born on March 15, 1985", "DATE"),
        ("SSN: 123-45-6789", "ID_NUMBER"),
        ("Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.token", "ACCESS_TOKEN"),
        ("sk-proj-1234567890abcdefghijklmnop", "API_KEY"),
        ("tok_abc123def456ghi789xyz", "PAYMENT_TOKEN"),
        ("MAC AA:BB:CC:DD:EE:FF", "MAC_ADDRESS"),
        ("IP: 192.168.1.1", "IP_ADDRESS"),
    ])
    def test_non_regression_other_entities_in_chat(f, chat, expected):
        out = f.anonymize_text(chat)
&gt;       assert has_tag(out, expected), out
E       AssertionError: tok_abc123def456ghi789xyz
E       assert False
E        +  where False = has_tag('tok_abc123def456ghi789xyz', 'PAYMENT_TOKEN')

tests\unit\test_chat_person_address_de_en.py:258: AssertionError</failure></testcase><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[MAC AA:BB:CC:DD:EE:FF-MAC_ADDRESS]" time="1.101" /><testcase classname="tests.unit.test_chat_person_address_de_en" name="test_non_regression_other_entities_in_chat[IP: 192.168.1.1-IP_ADDRESS]" time="1.150" /></testsuite></testsuites>